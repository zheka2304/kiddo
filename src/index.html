<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>RaccoonGame</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }
    </style>

</head>

<body class="player-body">
<!-- case 1: sceneConfig from localStorage -->
<!-- <kiddo-player local-storage-key="kiddo_default_task_from_storage"></kiddo-player>
<script></script> -->

<!-- case 2: sceneConfig from URL -->
<!-- <kiddo-player kiddo-scene-config="http://192.168.196.173:91/ru/raccoon/task1/task.yaml"></kiddo-player>-->

<!-- case3: sceneConfig from variable -->
<kiddo-player></kiddo-player>


<!--  <script>-->
<!--    const appConfig = {-->
<!--      // language: {-->
<!--      //   useOnly: 'ru'-->
<!--      // },-->
<!--      analytics: {-->
<!--        GA_key: 'UA-159399120-1'-->
<!--      }-->
<!--    };-->
<!--    const rootElement = document.querySelector('kiddo-player');-->
<!--    rootElement.setAttribute('kiddo-app-config', JSON.stringify(appConfig));-->
<!--  </script>-->

<!-- <script>
  if (appConfig.analytics.GA_key) {
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', appConfig.analytics.GA_key, 'auto');
    ga('send', 'pageview');
  }
</script> -->

<script>
    // sample raccoon task solution
    /*
    import raccoon

    raccoon.go_down(2)
    raccoon.place_turret()
    raccoon.go_up(1)
    raccoon.wait(2)
    raccoon.go_down(1)
    raccoon.go_right(2)
    raccoon.go_up(1)
    raccoon.go_right(2)
    raccoon.go_down(2)
    */

  const sceneConfig1 = `
    sceneType: raccoon
    generatingFunc: >-
      this.setPlayerPosition(1, 0);
      this.setGameField([
        ['BU', 'RO', 'BU', 'BU', 'BU', 'BU'],
        ['BU', 'RO', 'GR', 'RO', 'RO', 'RO'],
        ['BU', 'RO', 'RO', 'RO', 'GR', 'RO'],
        ['BU', 'RO', 'RO', 'GR', 'GR', 'FI'],
        ['BU', 'SH', 'L2', 'GR', 'OF', 'OF'],
        ['BU', 'L3', 'L4', 'GR', 'OF', 'GR']
      ]);
      this.addTurrets([1, 1]);
      this.addMonster([3, 1], 'right', true);
      this.addCheckingLogic('return this.player.position.x === 5 && this.player.position.y === 3 ? null : "FINISH_NOT_REACHED"');
    winButton:
      url: ./task2
      text: Следующий уровень
    initialScript: |-
      import raccoon
      # Add your code here
    taskDescription: Доведи енота до флага
    `;

    const sceneConfig = `sceneType: generic
taskDescription: ''
generatingFunc: "TileRegistry.addBasicTile('water', {\\r\\n  texture: {\\r\\n    atlas: { src: 'assets:/tile-atlas.png', width: 4, height: 4 },\\r\\n    items: {\\r\\n      main: [[1, 1]]\\r\\n    }\\r\\n  },\\r\\n  immutableTags: ['obstacle', 'liquid']\\r\\n});\\r\\n\\r\\nBuilder.setupGameField([\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass;goal-flag', 'water', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'stone', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n  ['stone', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'grass', 'stone'],\\r\\n], {\\r\\n  lightMap: {\\r\\n    enabled: true,\\r\\n    ambient: 0.09\\r\\n  }\\r\\n});\\r\\n\\r\\nBuilder.addGameObject(new ConsoleTerminalGameObject({x: 2, y: 2}, {\\r\\n    title: 'test',\\r\\n    requireInput: () => 1,\\r\\n    onApplied: () => console.log(\\"apply\\"),\\r\\n    enableEcho: true\\r\\n}));\\r\\n\\r\\nBuilder.setPlayer(new GenericPlayer({x: 1, y: 1}, { \\r\\n    skin: 'link',\\r\\n    defaultLightSources: [ { radius: 3, brightness: 1 } ],\\r\\n\\r\\n    minVisibleLightLevel: 0.1,\\r\\n    interactRange: 1,\\r\\n    lookRange: 3\\r\\n}));\\r\\n\\r\\nBuilder.addCheckingLogic(DefaultCheckingLogic.GOAL_REACHED);"`;
  // DON'T EDIT THE CODE BELOW
  const rootElement = document.querySelector('kiddo-player');
  rootElement.setAttribute('kiddo-scene-config', sceneConfig);
  rootElement.setAttribute('kiddo-app-config', JSON.stringify(appConfig));
</script>
</body>

</html>
